import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,d as n,o as l}from"./app-CGGfBqAx.js";const e={};function t(h,i){return l(),a("div",null,i[0]||(i[0]=[n(`<h1 id="cx-oralce-操作-oracle-数据库" tabindex="-1"><a class="header-anchor" href="#cx-oralce-操作-oracle-数据库"><span>cx_Oralce - 操作 Oracle 数据库</span></a></h1><h2 id="一、概述" tabindex="-1"><a class="header-anchor" href="#一、概述"><span>一、概述</span></a></h2><p><code>cx_Oracle</code>是一个用于Python语言与Oracle数据库进行交互的强大第三方库。它提供了高效的方式来连接Oracle数据库，执行SQL语句（包括查询、插入、更新和删除等操作），并且能够处理数据库返回的结果集。通过<code>cx_Oracle</code>，开发者可以在Python应用程序中充分利用Oracle数据库的功能。</p><h2 id="二、pip安装" tabindex="-1"><a class="header-anchor" href="#二、pip安装"><span>二、pip安装</span></a></h2><ol><li><strong>检查必要的依赖</strong><ul><li>首先，确保系统已经安装了Oracle客户端库。<code>cx_Oracle</code>需要依赖Oracle客户端库来与数据库进行通信。不同的操作系统有不同的安装方式，例如在Linux系统中，可能需要安装<code>oracle - instantclient - basic</code>等相关软件包；在Windows系统中，需要下载并安装Oracle Instant Client。</li></ul></li><li><strong>安装cx_Oracle</strong><ul><li>安装<code>cx_Oracle</code>，在命令行中执行<code>pip install cx_Oracle</code>。等待安装完成后，就可以在Python代码中使用该库了。</li></ul></li></ol><h2 id="三、简单示例" tabindex="-1"><a class="header-anchor" href="#三、简单示例"><span>三、简单示例</span></a></h2><ol><li><strong>连接Oracle数据库并查询数据</strong><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 连接数据库信息</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">connection_string </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;user/password@host:port/service_name&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 建立连接</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    connection </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(connection_string)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 创建游标</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> connection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">cursor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 执行SQL查询语句</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sql_query </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;SELECT * FROM your_table&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql_query)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 获取查询结果</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    results </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">fetchall</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">    for</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> row </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">in</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> results:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">        print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(row)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 关闭游标和连接</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    connection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">except</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle.Error </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> error:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;数据库操作出错: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, error)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>在这个示例中： <ul><li>首先导入<code>cx_Oracle</code>库。</li><li>定义了连接数据库的字符串<code>connection_string</code>，其中包含用户名、密码、主机地址、端口和服务名等信息，需要根据实际情况修改。</li><li>使用<code>connect</code>方法建立与数据库的连接。如果连接成功，会返回一个<code>connection</code>对象。</li><li>通过<code>connection</code>对象创建游标<code>cursor</code>，游标用于执行SQL语句并处理结果。</li><li>执行查询语句<code>SELECT * FROM your_table</code>，可以根据实际需求修改查询内容。</li><li>使用<code>fetchall</code>方法获取查询结果，结果是一个包含所有行的元组列表，然后遍历并打印这些行。</li><li>最后，关闭游标和连接，释放资源。如果在操作过程中出现错误，会捕获<code>cx_Oracle.Error</code>异常并打印错误信息。</li></ul></li></ul></li><li><strong>插入数据示例</strong><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 连接数据库信息</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">connection_string </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;user/password@host:port/service_name&quot;</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">try</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 建立连接</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    connection </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">connect</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(connection_string)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 创建游标</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> connection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">cursor</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 插入数据的SQL语句</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    sql_insert </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;INSERT INTO your_table (column1, column2) VALUES (:value1, :value2)&quot;</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    values </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> {</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;value1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;data1&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;value2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;data2&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">}</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">execute</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(sql_insert, values)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 提交事务</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    connection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">commit</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">    # 关闭游标和连接</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    cursor.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">    connection.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">close</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">except</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> cx_Oracle.Error </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">as</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> error:</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">    print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;插入数据出错: &quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, error)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>此示例用于向数据库中插入数据： <ul><li>连接数据库的步骤与查询示例相同。</li><li>定义插入数据的SQL语句，这里使用了命名参数（<code>:value1</code>和<code>:value2</code>），这种方式可以更清晰地将参数与SQL语句结合，也有助于防止SQL注入。</li><li>定义一个字典<code>values</code>，其中包含要插入的值，键与SQL语句中的命名参数相对应。</li><li>执行插入操作，将SQL语句和参数值传递给<code>cursor.execute</code>方法。</li><li>插入数据后需要提交事务，通过<code>connection.commit()</code>来完成。</li><li>最后关闭游标和连接。</li></ul></li></ul></li></ol><h2 id="四、常见注意事项" tabindex="-1"><a class="header-anchor" href="#四、常见注意事项"><span>四、常见注意事项</span></a></h2><ol><li><strong>数据库连接配置</strong><ul><li>确保<code>connection_string</code>中的信息（用户名、密码、主机、端口和服务名）准确无误。连接Oracle数据库时，服务名的配置可能因数据库版本和部署方式而有所不同，需要根据实际情况确定。</li></ul></li><li><strong>字符编码</strong><ul><li>Oracle数据库有自己的字符编码体系。在处理数据时，要注意数据库字符编码与Python程序中的编码设置一致，避免出现乱码问题。特别是在插入和读取包含中文或其他特殊字符的数据时，可能需要进行编码转换操作。</li></ul></li><li><strong>SQL注入防范</strong><ul><li>像在插入数据示例中展示的一样，尽量使用参数化的SQL语句（如命名参数或位置参数）来防止SQL注入。避免直接拼接用户输入的内容到SQL语句中，否则可能会导致安全漏洞。</li></ul></li><li><strong>资源管理</strong><ul><li>连接和游标是占用数据库资源的对象。在使用完后，一定要及时关闭游标和连接，以避免资源浪费和潜在的数据库性能问题。如果在一个函数或代码块中使用<code>cx_Oracle</code>，可以考虑使用<code>try - finally</code>或者<code>with</code>语句来确保资源的正确释放。例如，可以使用<code>with cx_Oracle.connect(connection_string) as connection:</code>的方式来自动管理连接的关闭。</li></ul></li></ol>`,9)]))}const p=s(e,[["render",t]]),k=JSON.parse('{"path":"/notes/python/%E4%B8%89%E6%96%B9%E5%BA%93/cx_oracle.html","title":"cx_Oralce - 操作 Oracle 数据库","lang":"zh-CN","frontmatter":{"date":"2022-01-09T00:00:00.000Z","category":"python","tag":["数据库"],"description":"cx_Oralce - 操作 Oracle 数据库 一、概述 cx_Oracle是一个用于Python语言与Oracle数据库进行交互的强大第三方库。它提供了高效的方式来连接Oracle数据库，执行SQL语句（包括查询、插入、更新和删除等操作），并且能够处理数据库返回的结果集。通过cx_Oracle，开发者可以在Python应用程序中充分利用Oracl...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"cx_Oralce - 操作 Oracle 数据库\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-02T07:54:44.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://xiangcheng.site/notes/python/%E4%B8%89%E6%96%B9%E5%BA%93/cx_oracle.html"}],["meta",{"property":"og:site_name","content":"大橙的运维宝典"}],["meta",{"property":"og:title","content":"cx_Oralce - 操作 Oracle 数据库"}],["meta",{"property":"og:description","content":"cx_Oralce - 操作 Oracle 数据库 一、概述 cx_Oracle是一个用于Python语言与Oracle数据库进行交互的强大第三方库。它提供了高效的方式来连接Oracle数据库，执行SQL语句（包括查询、插入、更新和删除等操作），并且能够处理数据库返回的结果集。通过cx_Oracle，开发者可以在Python应用程序中充分利用Oracl..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-02T07:54:44.000Z"}],["meta",{"property":"article:tag","content":"数据库"}],["meta",{"property":"article:published_time","content":"2022-01-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-02T07:54:44.000Z"}]]},"git":{"createdTime":1732214708000,"updatedTime":1735804484000,"contributors":[{"name":"daCheng","username":"daCheng","email":"xiangxiaoc@outlook.com","commits":2,"url":"https://github.com/daCheng"}]},"readingTime":{"minutes":3.87,"words":1161},"filePathRelative":"notes/python/三方库/cx_oracle.md","excerpt":"\\n<h2>一、概述</h2>\\n<p><code>cx_Oracle</code>是一个用于Python语言与Oracle数据库进行交互的强大第三方库。它提供了高效的方式来连接Oracle数据库，执行SQL语句（包括查询、插入、更新和删除等操作），并且能够处理数据库返回的结果集。通过<code>cx_Oracle</code>，开发者可以在Python应用程序中充分利用Oracle数据库的功能。</p>\\n<h2>二、pip安装</h2>\\n<ol>\\n<li><strong>检查必要的依赖</strong>\\n<ul>\\n<li>首先，确保系统已经安装了Oracle客户端库。<code>cx_Oracle</code>需要依赖Oracle客户端库来与数据库进行通信。不同的操作系统有不同的安装方式，例如在Linux系统中，可能需要安装<code>oracle - instantclient - basic</code>等相关软件包；在Windows系统中，需要下载并安装Oracle Instant Client。</li>\\n</ul>\\n</li>\\n<li><strong>安装cx_Oracle</strong>\\n<ul>\\n<li>安装<code>cx_Oracle</code>，在命令行中执行<code>pip install cx_Oracle</code>。等待安装完成后，就可以在Python代码中使用该库了。</li>\\n</ul>\\n</li>\\n</ol>","autoDesc":true}');export{p as comp,k as data};
