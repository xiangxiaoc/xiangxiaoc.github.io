import{_ as a}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as s,d as t,o as n}from"./app-oM9Xk1mE.js";const i={};function r(d,e){return n(),s("div",null,e[0]||(e[0]=[t(`<h1 id="nfs-网络文件系统" tabindex="-1"><a class="header-anchor" href="#nfs-网络文件系统"><span>NFS - 网络文件系统</span></a></h1><p>Linux to Linux 的文件共享服务，默认端口 2049</p><h3 id="安装与启用" tabindex="-1"><a class="header-anchor" href="#安装与启用"><span><a href="#%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E7%94%A8"></a>安装与启用</span></a></h3><ul><li>yum 包名： nfs-utils （含客户端）</li><li>apt 包名： nfs-kernel-server</li><li>systemctl 服务名：nfs-server ( RHEL 5 6 需要开启 rpcbind 服务支持 )</li><li>apt 客户端包名：nfs-common</li></ul><h2 id="rhel-系配置" tabindex="-1"><a class="header-anchor" href="#rhel-系配置"><span><a href="#rhel-%E7%B3%BB%E9%85%8D%E7%BD%AE"></a>RHEL 系配置</span></a></h2><h4 id="防火墙" tabindex="-1"><a class="header-anchor" href="#防火墙"><span><a href="#%E9%98%B2%E7%81%AB%E5%A2%99"></a>防火墙</span></a></h4><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>firewall-cmd --permanent --add-service=nfs</span></span>
<span class="line"><span>firewall-cmd --reload</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="共享目录配置文件" tabindex="-1"><a class="header-anchor" href="#共享目录配置文件"><span><a href="#%E5%85%B1%E4%BA%AB%E7%9B%AE%E5%BD%95%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"></a>共享目录配置文件</span></a></h4><p>/etc/exports</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>&lt;输出目录&gt; [客户端1 选项（访问权限,用户映射,其他）] [客户端2 选项（访问权限,用户映射,其他）]</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h6 id="客户端来源指定的几种方式" tabindex="-1"><a class="header-anchor" href="#客户端来源指定的几种方式"><span><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%9D%A5%E6%BA%90%E6%8C%87%E5%AE%9A%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E5%BC%8F"></a>客户端来源指定的几种方式</span></a></h6><ul><li>指定ip地址的主机：192.168.0.200</li><li>指定子网中的所有主机：192.168.*</li><li>指定域名的主机：<a href="http://david.bsmart.cn" target="_blank" rel="noopener noreferrer">david.bsmart.cn</a></li><li>指定域中的所有主机：*.bsmart.cn</li><li>所有主机：*</li></ul><h6 id="选项参数" tabindex="-1"><a class="header-anchor" href="#选项参数"><span><a href="#%E9%80%89%E9%A1%B9%E5%8F%82%E6%95%B0"></a>选项参数</span></a></h6><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>ro</td><td>只读</td></tr><tr><td>rw</td><td>读写</td></tr><tr><td>root_squash</td><td>当NFS客户端以root管理员访问时，映射为NFS服务器的匿名用户</td></tr><tr><td>no_root_squash</td><td>当NFS客户端以root管理员访问时，映射为NFS服务器的root管理员</td></tr><tr><td>all_squash</td><td>无论NFS客户端使用什么账户访问，均映射为NFS服务器的匿名用户</td></tr><tr><td>sync</td><td>同时将数据写入到内存与硬盘中，保证不丢失数据</td></tr><tr><td>async</td><td>优先将数据保存到内存，然后再写入硬盘；这样效率更高，但可能会丢失数据</td></tr><tr><td>secure</td><td>限制客户端只能从小于1024的tcp/ip端口连接nfs服务器（默认设置）</td></tr><tr><td>insecure</td><td>允许客户端从大于1024的tcp/ip端口连接服务器</td></tr><tr><td>wdelay</td><td>检查是否有相关的写操作，如果有则将这些写操作一起执行，这样可以提高效率（默认设置）</td></tr><tr><td>no_wdelay</td><td>若有写操作则立即执行，应与sync配合使用</td></tr><tr><td>subtree</td><td>若输出目录是一个子目录，则nfs服务器将检查其父目录的权限(默认设置)</td></tr><tr><td>no_subtree</td><td>即使输出目录是一个子目录，nfs服务器也不检查其父目录的权限，这样可以提高效率</td></tr></tbody></table><h3 id="快速配置" tabindex="-1"><a class="header-anchor" href="#快速配置"><span><a href="#%E5%BF%AB%E9%80%9F%E9%85%8D%E7%BD%AE"></a>快速配置</span></a></h3><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /mnt/nfs</span></span>
<span class="line"><span>chmod -R 777 /mnt/nfs</span></span>
<span class="line"><span>lan_ip=$(hostname -I | awk &#39;{print $1}&#39;) </span></span>
<span class="line"><span>src_ip=\${lan_ip%.*}</span></span>
<span class="line"><span>echo &quot;# nfs for $src_ip&quot; &gt;&gt; /etc/exports</span></span>
<span class="line"><span>sed -i &quot;$ a /mnt/data/nfs \${src_ip}.*(rw,sync,no_root_squash,insecure,no_subtree)&quot; /etc/exports</span></span>
<span class="line"><span>systemctl restart nfs-server</span></span>
<span class="line"><span>systemctl enable nfs-server</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>查看已生效的配置</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cat /var/lib/nfs/etab</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>查看哪些客户端正在挂载</p><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>cat /var/lib/nfs/rmtab</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="客户端配置" tabindex="-1"><a class="header-anchor" href="#客户端配置"><span><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E9%85%8D%E7%BD%AE"></a>客户端配置</span></a></h4><h5 id="showmount-命令" tabindex="-1"><a class="header-anchor" href="#showmount-命令"><span><a href="#showmount-%E5%91%BD%E4%BB%A4"></a>showmount 命令</span></a></h5><table><thead><tr><th>参数</th><th>作用</th></tr></thead><tbody><tr><td>-e IP</td><td>显示NFS服务器的共享列表</td></tr><tr><td>-a</td><td>显示本机挂载的文件资源的情况NFS资源的情况</td></tr><tr><td>-v</td><td>显示版本号</td></tr></tbody></table><div class="language-plain line-numbers-mode" data-highlighter="shiki" data-ext="plain" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>mkdir /mnt/data/nfs_a</span></span>
<span class="line"><span>sed -i &quot;$ a 192.168.1.70:/mnt/data/nfs /mnt/data/nfs_a nfs defaults 0 0&quot; /etc/fstab</span></span>
<span class="line"><span>mount -a</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,24)]))}const h=a(i,[["render",r]]),c=JSON.parse('{"path":"/notes/linux/%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1/nfs.html","title":"NFS - 网络文件系统","lang":"zh-CN","frontmatter":{"date":"2022-01-09T00:00:00.000Z","category":"应用服务","tag":["Linux","网络文件系统"],"description":"NFS - 网络文件系统 Linux to Linux 的文件共享服务，默认端口 2049 安装与启用 yum 包名： nfs-utils （含客户端） apt 包名： nfs-kernel-server systemctl 服务名：nfs-server ( RHEL 5 6 需要开启 rpcbind 服务支持 ) apt 客户端包名：nfs-comm...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"NFS - 网络文件系统\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-02T07:54:44.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://xiangcheng.site/notes/linux/%E5%BA%94%E7%94%A8%E6%9C%8D%E5%8A%A1/nfs.html"}],["meta",{"property":"og:site_name","content":"大橙的运维宝典"}],["meta",{"property":"og:title","content":"NFS - 网络文件系统"}],["meta",{"property":"og:description","content":"NFS - 网络文件系统 Linux to Linux 的文件共享服务，默认端口 2049 安装与启用 yum 包名： nfs-utils （含客户端） apt 包名： nfs-kernel-server systemctl 服务名：nfs-server ( RHEL 5 6 需要开启 rpcbind 服务支持 ) apt 客户端包名：nfs-comm..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-02T07:54:44.000Z"}],["meta",{"property":"article:tag","content":"网络文件系统"}],["meta",{"property":"article:tag","content":"Linux"}],["meta",{"property":"article:published_time","content":"2022-01-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-02T07:54:44.000Z"}]]},"git":{"createdTime":1732214708000,"updatedTime":1735804484000,"contributors":[{"name":"daCheng","username":"daCheng","email":"xiangxiaoc@outlook.com","commits":2,"url":"https://github.com/daCheng"}]},"readingTime":{"minutes":2.35,"words":706},"filePathRelative":"notes/linux/应用服务/nfs.md","excerpt":"\\n<p>Linux to Linux 的文件共享服务，默认端口 2049</p>\\n<h3><a class=\\"header-anchor\\" href=\\"#安装与启用\\"><span></span></a><a href=\\"#%E5%AE%89%E8%A3%85%E4%B8%8E%E5%90%AF%E7%94%A8\\"></a>安装与启用</h3>\\n<ul>\\n<li>yum 包名： nfs-utils （含客户端）</li>\\n<li>apt 包名： nfs-kernel-server</li>\\n<li>systemctl 服务名：nfs-server ( RHEL 5 6 需要开启 rpcbind 服务支持 )</li>\\n<li>apt 客户端包名：nfs-common</li>\\n</ul>","autoDesc":true}');export{h as comp,c as data};
