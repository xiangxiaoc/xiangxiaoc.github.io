import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as n,d as a,o as e}from"./app-BlglZ9nZ.js";const t={};function h(l,i){return e(),n("div",null,i[0]||(i[0]=[a(`<h1 id="python-dotenv-解析-env-环境变量配置文件" tabindex="-1"><a class="header-anchor" href="#python-dotenv-解析-env-环境变量配置文件"><span>python-dotenv - 解析 .env 环境变量配置文件</span></a></h1><h2 id="一、概述" tabindex="-1"><a class="header-anchor" href="#一、概述"><span>一、概述</span></a></h2><p><code>python - dotenv</code> 是一个用于在Python项目中管理环境变量的实用库。在开发过程中，不同的环境（如开发环境、测试环境、生产环境）可能需要不同的配置，例如数据库连接字符串、API密钥等。 <code>dotenv</code> 库允许开发者将这些配置信息存储在一个 <code>.env</code> 文件中，并轻松地在Python代码中加载和使用这些环境变量。</p><h2 id="二、pip安装" tabindex="-1"><a class="header-anchor" href="#二、pip安装"><span>二、pip安装</span></a></h2><p><strong>安装python - dotenv</strong> 在命令行中执行以下命令：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">pip</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> python</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> dotenv</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>安装完成后，即可在Python代码中使用该库。</p><h2 id="三、简单示例" tabindex="-1"><a class="header-anchor" href="#三、简单示例"><span>三、简单示例</span></a></h2><ol><li><strong>加载环境变量</strong> 假设项目根目录下有一个 <code>.env</code> 文件，内容如下：</li></ol><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DB_USERNAME</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">myuser</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">DB_PASSWORD</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">mypassword</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">API_KEY</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">1234567890</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>以下是Python代码示例：</p><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dotenv </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> load_dotenv</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 加载.env文件中的环境变量</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_dotenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取环境变量</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db_username </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;DB_USERNAME&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db_password </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;DB_PASSWORD&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">api_key </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;API_KEY&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;数据库用户名: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db_username</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;数据库密码: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db_password</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">print</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">f</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;API密钥: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">{</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">api_key</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">}</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>在这个示例中：</p><ul><li>首先从 <code>dotenv</code> 库中导入 <code>load_dotenv</code> 函数，从Python的标准库中导入 <code>os</code> 模块。</li><li>使用 <code>load_dotenv()</code> 函数加载 <code>.env</code> 文件中的环境变量。这个函数会自动查找项目根目录下的 <code>.env</code> 文件。</li><li>通过 <code>os.getenv()</code> 函数获取特定的环境变量，并将其存储在相应的变量中，最后打印出来。</li></ul><ol start="2"><li><strong>指定.env文件路径</strong> 如果 <code>.env</code> 文件不在项目根目录下，或者文件名不是 <code>.env</code>，可以指定文件路径。例如，假设 <code>.env</code> 文件在 <code>config</code> 目录下，名为 <code>config.env</code>，代码如下：</li></ol><div class="language-python line-numbers-mode" data-highlighter="shiki" data-ext="python" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">from</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> dotenv </span><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> load_dotenv</span></span>
<span class="line"><span style="--shiki-light:#A626A4;--shiki-dark:#C678DD;">import</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 指定.env文件路径并加载</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">env_path </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os.path.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">join</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getcwd</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(), </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;config&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;config.env&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">load_dotenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#986801;--shiki-light-font-style:inherit;--shiki-dark:#E06C75;--shiki-dark-font-style:italic;">dotenv_path</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">env_path)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 获取环境变量</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">db_username </span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> os.</span><span style="--shiki-light:#383A42;--shiki-dark:#61AFEF;">getenv</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">(</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;DB_USERNAME&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 其他获取操作类似...</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里使用 <code>os.path.join()</code> 函数构建 <code>.env</code> 文件的完整路径，并将其传递给 <code>load_dotenv()</code> 函数的 <code>dotenv_path</code> 参数来加载指定的 <code>.env</code> 文件。</p><h2 id="四、常见注意事项" tabindex="-1"><a class="header-anchor" href="#四、常见注意事项"><span>四、常见注意事项</span></a></h2><h3 id="_1-安全性" tabindex="-1"><a class="header-anchor" href="#_1-安全性"><span>1. 安全性</span></a></h3><ul><li>虽然 <code>.env</code> 文件可以方便地存储配置信息，但它不应包含敏感信息（如生产环境的根密码等），如果不小心将 <code>.env</code> 文件提交到版本控制系统（如Git），可能会导致安全问题。可以将 <code>.env</code> 文件添加到 <code>.gitignore</code> 文件中，防止其被意外提交。</li></ul><h3 id="_2-变量类型" tabindex="-1"><a class="header-anchor" href="#_2-变量类型"><span>2. 变量类型</span></a></h3><ul><li>存储在 <code>.env</code> 文件中的环境变量默认都是字符串类型。如果需要其他类型（如整数、布尔值等），在Python代码中使用时可能需要进行类型转换。例如，如果 <code>.env</code> 文件中有一个变量 <code>PORT=8080</code>，在使用时可能需要使用 <code>int(os.getenv(&#39;PORT&#39;))</code> 来获取整数类型的值。</li></ul><h3 id="_3-覆盖系统环境变量" tabindex="-1"><a class="header-anchor" href="#_3-覆盖系统环境变量"><span>3. 覆盖系统环境变量</span></a></h3><ul><li>当使用 <code>load_dotenv()</code> 加载 <code>.env</code> 文件中的环境变量时，如果 <code>.env</code> 文件中的变量与系统中已有的同名环境变量冲突，默认情况下， <code>.env</code> 文件中的变量会覆盖系统环境变量。在某些情况下，这可能不是期望的行为，可以根据需要调整代码逻辑来处理这种情况。</li></ul>`,24)]))}const k=s(t,[["render",h]]),o=JSON.parse('{"path":"/notes/python/%E4%B8%89%E6%96%B9%E5%BA%93/python-dotenv.html","title":"python-dotenv - 解析 .env 环境变量配置文件","lang":"zh-CN","frontmatter":{"date":"2022-01-09T00:00:00.000Z","category":"python","tag":["配置文件处理"],"description":"python-dotenv - 解析 .env 环境变量配置文件 一、概述 python - dotenv 是一个用于在Python项目中管理环境变量的实用库。在开发过程中，不同的环境（如开发环境、测试环境、生产环境）可能需要不同的配置，例如数据库连接字符串、API密钥等。 dotenv 库允许开发者将这些配置信息存储在一个 .env 文件中，并轻松地...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"python-dotenv - 解析 .env 环境变量配置文件\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2022-01-09T00:00:00.000Z\\",\\"dateModified\\":\\"2025-01-02T07:54:44.000Z\\",\\"author\\":[]}"],["meta",{"property":"og:url","content":"https://xiangcheng.site/notes/python/%E4%B8%89%E6%96%B9%E5%BA%93/python-dotenv.html"}],["meta",{"property":"og:site_name","content":"大橙的运维宝典"}],["meta",{"property":"og:title","content":"python-dotenv - 解析 .env 环境变量配置文件"}],["meta",{"property":"og:description","content":"python-dotenv - 解析 .env 环境变量配置文件 一、概述 python - dotenv 是一个用于在Python项目中管理环境变量的实用库。在开发过程中，不同的环境（如开发环境、测试环境、生产环境）可能需要不同的配置，例如数据库连接字符串、API密钥等。 dotenv 库允许开发者将这些配置信息存储在一个 .env 文件中，并轻松地..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2025-01-02T07:54:44.000Z"}],["meta",{"property":"article:tag","content":"配置文件处理"}],["meta",{"property":"article:published_time","content":"2022-01-09T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2025-01-02T07:54:44.000Z"}]]},"git":{"createdTime":1732214708000,"updatedTime":1735804484000,"contributors":[{"name":"daCheng","username":"daCheng","email":"xiangxiaoc@outlook.com","commits":2,"url":"https://github.com/daCheng"}]},"readingTime":{"minutes":2.72,"words":815},"filePathRelative":"notes/python/三方库/python-dotenv.md","excerpt":"\\n<h2>一、概述</h2>\\n<p><code>python - dotenv</code> 是一个用于在Python项目中管理环境变量的实用库。在开发过程中，不同的环境（如开发环境、测试环境、生产环境）可能需要不同的配置，例如数据库连接字符串、API密钥等。\\n<code>dotenv</code> 库允许开发者将这些配置信息存储在一个 <code>.env</code> 文件中，并轻松地在Python代码中加载和使用这些环境变量。</p>\\n<h2>二、pip安装</h2>\\n<p><strong>安装python - dotenv</strong>\\n在命令行中执行以下命令：</p>\\n<div class=\\"language-bash line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"bash\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span style=\\"--shiki-light:#4078F2;--shiki-dark:#61AFEF\\">pip</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> install</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> python</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> -</span><span style=\\"--shiki-light:#50A14F;--shiki-dark:#98C379\\"> dotenv</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div></div></div>","autoDesc":true}');export{k as comp,o as data};
